{% extends "base.html" %}
{% load humanize %}

{% block title %}{{ product.name }} — Garuda Football Shop{% endblock %}

{% block content %}
<article class="card">
  <div class="row">
    {% if product.thumbnail %}
      <img class="thumb" style="width:180px;height:180px" src="{{ product.thumbnail }}" alt="{{ product.name }}">
    {% else %}
      <img class="thumb" style="width:180px;height:180px" src="https://placehold.co/360x360/0e0e16/8b5cf6?text=No+Image" alt="No image">
    {% endif %}

    <div style="flex:1">
      <h2 class="title" style="font-size:26px">{{ product.name }}</h2>

      <p class="meta" style="margin-bottom:12px">
        <span class="badge">{{ product.get_category_display|default:product.category }}</span>
        {% if product.is_featured %}&nbsp;<span class="badge featured">FEATURED</span>{% endif %}
      </p>

      <p class="meta" style="margin:-4px 0 12px 0;color:var(--muted);font-size:13px">
        Dibuat:
        {% if product.created_at %}{{ product.created_at|date:"d M Y, H:i" }}{% else %}-{% endif %}
        {% if product.user %} oleh <b>{{ product.user.username }}</b>{% endif %}
        {% if product.updated_at %}
          <br>Terakhir diupdate: {{ product.updated_at|date:"d M Y, H:i" }}
          {% if product.updated_by %} oleh <b>{{ product.updated_by.username }}</b>{% endif %}
        {% endif %}
      </p>

      <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
        <div class="price" style="font-size:22px">Rp {{ product.price|intcomma }}</div>
      </div>

      <p style="color:#d6d7df;line-height:1.65">{{ product.description|linebreaksbr }}</p>

      <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
        <a class="btn" href="{% url 'main:show_products' %}">← Kembali</a>
        <a class="btn btn-primary" href="{% url 'main:create_product' %}">+ Tambah Produk</a>

        {% if request.user.is_authenticated %}
          {% if request.user == product.user or request.user.is_staff %}
            <a class="btn" href="{% url 'main:edit_product' product.id %}">✎ Edit</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
</article>
{% endblock %}
