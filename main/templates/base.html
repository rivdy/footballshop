{% load static %}
<!doctype html>
<html lang="id">
<head>
<meta name="csrf-token" content="{{ csrf_token }}">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Garuda Football Shop{% endblock %}</title>
  <link rel="icon" href="{% static 'favicon.ico' %}">

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b0e; --card:#121218; --muted:#a2a2b3; --text:#f6f7fb;
      --primary:#8b5cf6; --primary-2:#a78bfa; --stroke:#1e2030;
      --green:#10b981; --red:#ef4444; --radius:16px;
      --shadow: 0 10px 24px rgba(0,0,0,.35), 0 2px 6px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(180deg,#0b0b0e 0%,#0d0d14 100%); color:var(--text);
    }

    /* ===== Layout umum (lebih lebar) ===== */
    .container{max-width:1200px;margin:24px auto;padding:0 16px}  /* sebelumnya 820px */

    /* Chip nama user di pojok kanan */
    .user-chip{
      border:1px solid var(--stroke);
      padding:6px 10px;border-radius:999px;
      background:#121218;box-shadow:var(--shadow);
      font-weight:600;
    }

    
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand h1{font-size:26px;margin:0 0 2px 0;letter-spacing:.3px}
    .brand small{color:var(--muted);font-size:12px}

    /* Buttons (lebih kecil) */
    .btn{
      display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;
      border:1px solid var(--stroke); background:linear-gradient(180deg,#141422 0%,#0e0e18 100%);
      color:var(--primary-2);text-decoration:none;font-weight:600;transition:.2s ease; box-shadow:0 0 0 rgba(0,0,0,0);
      font-size:0.9rem;
    }
    .btn:hover{border-color:var(--primary); color:#fff; box-shadow:var(--shadow)}
    .btn-primary{background:linear-gradient(180deg,rgba(139,92,246,.18),rgba(139,92,246,.10));border-color:rgba(139,92,246,.45);color:#fff}
    .btn-primary:hover{transform:translateY(-1px)}

    /* Grid kartu (1→2→4 kolom) */
    .cards-grid{
      display:grid; gap:10px;
      grid-template-columns:repeat(1,minmax(0,1fr));
    }
    @media (min-width:640px){ .cards-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
    @media (min-width:1024px){ .cards-grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }

    /* Card & media seragam (lebih kecil) */
    .card{
      border:1px solid var(--stroke); border-radius:12px; padding:8px; background:#121218;
    }
    .card .media{
      width:100%; aspect-ratio:4/3; overflow:hidden; border-radius:10px; margin-bottom:8px;
      border:1px solid var(--stroke); background:#0c0c12;
    }
    .card .media > img{ width:100%; height:100%; object-fit:cover; display:block; }

    .card h3{ font-size:0.98rem; margin:0 0 4px; }
    .card .text-sm{ font-size:0.86rem; }
    .card .font-bold{ font-size:0.95rem; }

    .empty{ text-align:center;color:var(--muted);padding:20px;border:1px dashed var(--stroke);border-radius:12px; background:rgba(255,255,255,.02) }
    footer{color:var(--muted);font-size:12px;margin:24px 0 8px}

    /* Navbar (desktop + mobile) */
    nav{display:flex;gap:8px;align-items:center}
    #nav-toggle{display:none}
    #nav-menu{display:none}
    .nav-links{display:flex;gap:8px}

    @media(max-width:680px){
      header{flex-wrap:wrap;gap:8px}
      .nav-links{display:none}
      #nav-toggle{display:inline-flex}
      #nav-menu{display:none; flex-direction:column; gap:8px; width:100%; margin-top:8px;}
      #nav-menu .btn{width:100%; justify-content:center}
    }
    /* ===== Modal polished (persegi, tidak kepotong) ===== */
      .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60; }
      .modal.open{ display:flex; }
      .modal .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.55); }
      .modal .panel{
        position:relative; width:min(680px, calc(100% - 40px));
        border:1px solid var(--stroke); background:#121218;
        border-radius:8px; /* kecil & tidak tajam */
        box-shadow:var(--shadow); padding:16px 16px 14px;
        overflow:visible; /* pastikan isi tidak terpotong */
      }

      /* Header kecil + tombol close */
      .modal .panel .modal-head{
        display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;
      }
      .modal .panel .modal-title{ font-weight:700; font-size:1rem; }
      .modal .panel .modal-close{
        border:1px solid var(--stroke); background:#0e0e16;
        border-radius:6px; padding:4px 8px; cursor:pointer; color:#cbd5e1;
      }

      /* Field set: label + input */
      .field{ margin-bottom:10px; }
      .field label{ display:block; margin-bottom:6px; }
      .input, .select, .textarea{
        width:100%; background:#0e0e16; color:var(--text);
        border:1px solid #2a2b3d; border-radius:8px;  /* persegi halus */
        padding:10px 12px; outline:none;
      }
      .textarea{ min-height:140px; resize:vertical; }

      /* Bar tombol bawah */
      .actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }

  </style>

  {% block extra_head %}{% endblock %}
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <h1>Garuda Football Shop</h1>
        <small>Rivaldy Putra Rivly — PBP B - 2406351453</small>
      </div>

      <!-- Desktop links (tanpa logic produk) -->
      <nav class="nav-links" aria-label="Primary">
      <div style="display:flex;align-items:center;gap:10px;">
          {% if request.user.is_authenticated %}
            <span class="user-chip">@{{ request.user.username }}</span>
          {% endif %}

          <nav class="nav-links" aria-label="Primary">
            <a href="{% url 'main:show_products' %}" class="btn">Home</a>
            <a href="{% url 'main:create_product' %}" class="btn btn-primary">+ Add</a>

            {% if request.user.is_authenticated %}
              <form method="post" action="{% url 'main:logout' %}" style="display:inline">
                {% csrf_token %}
                <button class="btn" type="submit">Logout</button>
              </form>
            {% else %}
              <a href="{% url 'main:login' %}" class="btn">Login</a>
              <a href="{% url 'main:register' %}" class="btn">Register</a>
            {% endif %}
          </nav>
        </div>
      </header>

      {% if last_login %}
        <small style="color:#a2a2b3;display:block;margin-top:-6px;text-align:right;">
          Last login: {{ last_login }}
        </small>
      {% endif %}

      <!-- Hamburger (mobile) -->
      <button id="nav-toggle" class="btn" aria-label="Toggle navigation" aria-expanded="false">☰</button>

      <!-- Mobile dropdown -->
      <nav id="nav-menu" aria-label="Mobile">
        <a href="{% url 'main:show_products' %}" class="btn">Home</a>
        <a href="{% url 'main:create_product' %}" class="btn btn-primary">+ Add</a>
        {% if request.user.is_authenticated %}
          <form method="post" action="{% url 'main:logout' %}">
            {% csrf_token %}
            <button class="btn" type="submit" style="width:100%">Logout</button>
          </form>
        {% else %}
          <a href="{% url 'main:login' %}" class="btn">Login</a>
          <a href="{% url 'main:register' %}" class="btn">Register</a>
        {% endif %}
      </nav>
    </header>

    {% block content %}{% endblock %}

    <footer>© {% now "Y" %} Garuda Football Shop — Built with Django.</footer>
  </div>

  <script>
    (function() {
      const toggle = document.getElementById('nav-toggle');
      const menu = document.getElementById('nav-menu');
      if (!toggle || !menu) return;
      toggle.addEventListener('click', () => {
        const isOpen = menu.style.display === 'flex';
        menu.style.display = isOpen ? 'none' : 'flex';
        toggle.setAttribute('aria-expanded', String(!isOpen));
      });
      const mq = window.matchMedia('(min-width: 681px)');
      mq.addEventListener?.('change', e => { if (e.matches) menu.style.display = 'none'; });
    })();
  </script>
</body>
</html>
